#!/bin/bash

# Percell Installation Wrapper
# This script runs the Python installation script

echo "Percell Installation"
echo "=================================="
echo "This will install Percell globally - you'll be able to run 'percell' from any directory!"
echo ""

# Check if Python 3.11 is available
if ! command -v python3.11 &> /dev/null; then
    echo "Error: Python 3.11 is not installed or not in PATH"
    echo "Please install Python 3.11 and try again"
    echo ""
    echo "Installation options:"
    echo "  macOS: brew install python@3.11"
    echo "  Ubuntu: sudo apt install python3.11"
    echo "  Or download from: https://www.python.org/downloads/"
    exit 1
fi

# Show available options
if [[ "$1" == "--help" || "$1" == "-h" ]]; then
    echo "Usage: ./install [OPTIONS]"
    echo ""
    echo "Options:"
    echo "  --verbose, -v         Enable verbose output during installation"
    echo "  --skip-cellpose       Skip Cellpose virtual environment setup"
    echo "  --skip-config         Skip configuration file creation"
    echo "  --force               Force reinstallation even if environments exist"
    echo "  --help, -h            Show this help message"
    echo ""
    exit 0
fi

# Run the Python installation script with Python 3.11
echo "Starting installation with options: $@"
echo ""
python3.11 percell/setup/install.py "$@" 